{
	"id": "3e4d9bae-66c9-2fff-bbf0-084a2dc5f825",
	"name": "Hc2vpp2 BGP Prefix SID calls",
	"description": "Examples of requests for testing advertising and receiving BGP Prefix SID.\nMore info:\nhttps://tools.ietf.org/html/draft-ietf-idr-bgp-prefix-sid-07#section-4.1\n\nhttps://tools.ietf.org/html/draft-ietf-spring-segment-routing-msdc-08#section-4.2.2",
	"order": [
		"bfdcbe7f-8a52-5179-ec31-47ea425ffa0b",
		"916baf2f-e773-09e8-d034-e7728f0a2743",
		"8601e61a-5ca0-6c0d-56a0-bc1d332b149b",
		"098d6df6-6bce-7b38-ef83-4b753c571864",
		"fb1a07bc-83d8-509d-69b1-4cbdb67ea2de",
		"65c1937e-7ea1-e1cd-ca8e-b2f312ad1ac4",
		"13805e7c-1ad8-0b3b-c73f-c22f798518ae",
		"5966c346-0f2e-a113-a395-b52297a168ea"
	],
	"folders": [],
	"timestamp": 1513592291556,
	"owner": 0,
	"public": false,
	"requests": [
		{
			"id": "098d6df6-6bce-7b38-ef83-4b753c571864",
			"headers": "Authorization: Basic YWRtaW46YWRtaW4=\nContent-Type: application/json\n",
			"url": "http://localhost:8183/restconf/config/hc2vpp-ietf-routing:routing/hc2vpp-ietf-mpls:mpls/hc2vpp-ietf-mpls-static:static-lsps/static-lsp/192.0.2.11",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "PUT",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": "",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1513954038151,
			"name": "Push single MPLS label",
			"description": "HC translates BGP LU updates to recursive routes with outgoing label.\nTo teach VPP how to resolve them we need non-recursive one.\n\nVPP can't recursively resolve a route that has out labels via a route that does not have out labels,\nso we cnfigure implicit null(3) (no more labels will be added to the package).\n\nCLI equivalent:\nip route add 192.0.2.11/32 via loop0 out-labels 3",
			"collectionId": "3e4d9bae-66c9-2fff-bbf0-084a2dc5f825",
			"responses": [],
			"rawModeData": "{\n  \"static-lsp\": [\n    {\n      \"name\": \"192.0.2.11\",\n      \"config\": {\n        \"in-segment\": {\n          \"ip-prefix\": \"192.0.2.11/32\"\n        },\n        \"operation\": \"impose-and-forward\",\n        \"outgoing-label\": 3,\n        \"outgoing-interface\": \"loop0\"\n      }\n    }\n  ]\n}"
		},
		{
			"id": "13805e7c-1ad8-0b3b-c73f-c22f798518ae",
			"headers": "Content-Type: application/xml\nAuthorization: Basic YWRtaW46YWRtaW4=\n",
			"url": "http://localhost:8183/restconf/config/bgp-rib:application-rib/192.0.2.11/tables/bgp-types:ipv4-address-family/bgp-labeled-unicast:labeled-unicast-subsequent-address-family/bgp-labeled-unicast:labeled-unicast-routes/labeled-unicast-route/bgp-lu-route/1",
			"preRequestScript": null,
			"pathVariables": {},
			"method": "DELETE",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1513954995928,
			"name": "Delete IPv4 labeled unicast route (cfg)",
			"description": "",
			"collectionId": "3e4d9bae-66c9-2fff-bbf0-084a2dc5f825",
			"responses": [],
			"rawModeData": ""
		},
		{
			"id": "5966c346-0f2e-a113-a395-b52297a168ea",
			"headers": "Content-Type: application/xml\nAuthorization: Basic YWRtaW46YWRtaW4=\n",
			"url": "http://localhost:8183/restconf/operational/bgp-rib:bgp-rib/rib/hc-bgp-instance/loc-rib",
			"preRequestScript": null,
			"pathVariables": {},
			"method": "GET",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1517405616873,
			"name": "Show Loc-RIB",
			"description": "To check if route was programmed.",
			"collectionId": "3e4d9bae-66c9-2fff-bbf0-084a2dc5f825",
			"responses": [],
			"rawModeData": "<neighbor xmlns=\"urn:opendaylight:params:xml:ns:yang:bgp:openconfig-extensions\">\n    <neighbor-address>10.25.1.9</neighbor-address>\n    <config>\n        <peer-group>application-peers</peer-group>\n    </config>\n</neighbor>"
		},
		{
			"id": "65c1937e-7ea1-e1cd-ca8e-b2f312ad1ac4",
			"headers": "Content-Type: application/xml\nAuthorization: Basic YWRtaW46YWRtaW4=\n",
			"url": "http://localhost:8183/restconf/config/bgp-rib:application-rib/192.0.2.11/tables/bgp-types:ipv4-address-family/bgp-labeled-unicast:labeled-unicast-subsequent-address-family/bgp-labeled-unicast:labeled-unicast-routes/labeled-unicast-route/bgp-lu-route/1",
			"preRequestScript": null,
			"pathVariables": {},
			"method": "GET",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1513953133232,
			"name": "Show IPv4 labeled unicast route (cfg)",
			"description": "",
			"collectionId": "3e4d9bae-66c9-2fff-bbf0-084a2dc5f825",
			"responses": [],
			"rawModeData": ""
		},
		{
			"id": "8601e61a-5ca0-6c0d-56a0-bc1d332b149b",
			"headers": "Content-Type: application/json\nAuthorization: Basic YWRtaW46YWRtaW4=\n",
			"url": "http://localhost:8183/restconf/config/openconfig-network-instance:network-instances/network-instance/global-bgp/openconfig-network-instance:protocols/protocol/openconfig-policy-types:BGP/hc-bgp-instance/bgp/bgp-openconfig-extensions:neighbors/neighbor/192.0.2.11",
			"preRequestScript": null,
			"pathVariables": {},
			"method": "PUT",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1513954016557,
			"name": "Add application peer",
			"description": "BGP HC borrows application peer concept for route programming.\n\nLet's configure an instance that supports BGP LU.",
			"collectionId": "3e4d9bae-66c9-2fff-bbf0-084a2dc5f825",
			"responses": [],
			"rawModeData": "{\n  \"neighbor\": {\n    \"neighbor-address\": \"192.0.2.11\",\n    \"config\": {\n      \"peer-group\": \"application-peers\"\n    },\n    \"afi-safis\": {\n      \"afi-safi\": [\n        {\n          \"afi-safi-name\": \"openconfig-bgp-types:IPV4-UNICAST\",\n          \"receive\": true,\n          \"send-max\": 0\n        },\n        {\n          \"afi-safi-name\": \"openconfig-bgp-types:IPV4-LABELLED-UNICAST\",\n          \"receive\": true,\n          \"send-max\": 0\n        }\n      ]\n    }\n  }\n}"
		},
		{
			"id": "916baf2f-e773-09e8-d034-e7728f0a2743",
			"headers": "Authorization: Basic YWRtaW46YWRtaW4=\nContent-Type: application/json\n",
			"url": "http://localhost:8183/restconf/config/hc2vpp-ietf-routing:routing/hc2vpp-ietf-mpls:mpls/interface/loop0",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "PUT",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": "",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1513953993897,
			"name": "Enable mpls on loop0 interface",
			"description": "",
			"collectionId": "3e4d9bae-66c9-2fff-bbf0-084a2dc5f825",
			"responses": [],
			"rawModeData": "{\n  \"interface\": [\n    {\n      \"name\": \"loop0\",\n      \"config\": {\n        \"enabled\": \"true\"\n      }\n    }\n  ]\n}"
		},
		{
			"id": "bfdcbe7f-8a52-5179-ec31-47ea425ffa0b",
			"headers": "Authorization: Basic YWRtaW46YWRtaW4=\nContent-Type: application/json\n",
			"url": "http://localhost:8183/restconf/config/ietf-interfaces:interfaces/interface/loop0",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "PUT",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": "",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1513953979381,
			"name": "Add loop0 interface ",
			"description": "We need an interface for our MPLS traffic. Our example uses loopback for simplicity.",
			"collectionId": "3e4d9bae-66c9-2fff-bbf0-084a2dc5f825",
			"responses": [],
			"rawModeData": "{\n  \"interface\": [\n    {\n      \"name\": \"loop0\",\n      \"description\": \"for testing purposes\",\n      \"type\": \"v3po:loopback\",\n      \"loopback\": {\n        \"mac\": \"00:ff:ff:ff:ff:ff\"\n      }\n    }\n  ]\n}"
		},
		{
			"id": "fb1a07bc-83d8-509d-69b1-4cbdb67ea2de",
			"headers": "Content-Type: application/json\nAuthorization: Basic YWRtaW46YWRtaW4=\n",
			"url": "http://localhost:8183/restconf/config/bgp-rib:application-rib/192.0.2.11/tables/bgp-types:ipv4-address-family/bgp-labeled-unicast:labeled-unicast-subsequent-address-family/bgp-labeled-unicast:labeled-unicast-routes/labeled-unicast-route/bgp-lu-route/1",
			"preRequestScript": null,
			"pathVariables": {},
			"method": "PUT",
			"data": [],
			"dataMode": "raw",
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1513954149219,
			"name": "Add IPv4 labeled unicast route",
			"description": "Configures BGP LU update for 10.10.10.10/24 via 192.0.2.11 with label 16011 and label-index 11.\n\nVerify presence of 3 FIB entries (MPLS non-eos, eos, IP) using CLI:\n\nvpp# show mpls fib 16011\n\nvpp# show ip fib 10.10.10.10",
			"collectionId": "3e4d9bae-66c9-2fff-bbf0-084a2dc5f825",
			"rawModeData": "{\n  \"bgp-labeled-unicast:labeled-unicast-route\": [\n    {\n      \"path-id\": 1,\n      \"route-key\": \"bgp-lu-route\",\n      \"attributes\": {\n        \"local-pref\": {\n          \"pref\": 100\n        },\n        \"bgp-prefix-sid\": {\n          \"bgp-prefix-sid-tlvs\": [\n            {\n              \"label-index-tlv\": 11\n            },\n            {\n              \"srgb-value\": [\n                {\n                  \"range\": 8000,\n                  \"base\": 16000\n                }\n              ]\n            }\n          ]\n        },\n        \"ipv4-next-hop\": {\n          \"global\": \"192.0.2.11\"\n        },\n        \"as-path\": {},\n        \"origin\": {\n          \"value\": \"igp\"\n        }\n      },\n      \"label-stack\": [\n        {\n          \"label-value\": 16011\n        }\n      ],\n      \"prefix\": \"10.10.10.10/24\"\n    }\n  ]\n}"
		}
	]
}